{"version":3,"file":"Utils.js","names":["_lodash","_interopRequireDefault","require","_objectIs","_object","_object2","_functionPrototype","_hasown","_arrayPrototype","_stringPrototype","_cheerio","_configuration","_RSTTraversal","_getAdapter","_validateAdapter","_enzymeShallowEqual","_excluded","e","__esModule","_typeof","o","Symbol","iterator","constructor","prototype","_slicedToArray","r","_arrayWithHoles","_iterableToArrayLimit","_unsupportedIterableToArray","_nonIterableRest","TypeError","a","_arrayLikeToArray","t","toString","call","slice","name","Array","from","test","length","n","l","i","u","f","next","Object","done","push","value","isArray","ownKeys","keys","getOwnPropertySymbols","filter","getOwnPropertyDescriptor","enumerable","apply","_objectSpread","arguments","forEach","_defineProperty","getOwnPropertyDescriptors","defineProperties","defineProperty","_toPropertyKey","configurable","writable","_toPrimitive","toPrimitive","String","Number","_objectWithoutProperties","_objectWithoutPropertiesLoose","indexOf","propertyIsEnumerable","hasOwnProperty","ITERATOR_SYMBOL","exports","getAdapter","options","undefined","console","warn","realGetAdapter","validateMountOptions","attachTo","hydrateIn","makeOptions","_get","get","configAttachTo","configHydrateIn","config","finalAttachTo","finalHydrateIn","mountTargets","isCustomComponent","component","adapter","validateAdapter","isCustomComponentElement","inst","isValidElement","type","propsOfNode","node","newEntries","entries","props","_ref","_ref2","fromEntries","typeOfNode","nodeHasType","displayNameOfNode","displayName","functionName","internalChildrenCompare","b","lenComp","isLoose","nodeCompare","nodeMatches","nodeEqual","flatA","flat","Infinity","flatB","childrenMatch","childrenEqual","removeNullaryReducer","acc","_ref3","_ref4","key","addition","internalNodeCompare","left","right","reduce","leftKeys","prop","isEqual","leftHasChildren","rightHasChildren","childCompare","childrenToSimplifiedArray","children","isTextualNode","rightKeys","is","containsChildrenSubArray","match","subArray","childrenOfNode","checker","_","arraysEqual","some","every","el","childrenToArray","result","nodeChildren","childrenArray","simplifiedArray","child","previousChild","pop","map","x","trim","isReactElementAlike","arg","withSetStateAllowed","fn","cleanup","global","document","AND","fns","fnsReversed","reverse","sym","s","concat","privateSet","obj","cloneElement","createElement","spyMethod","instance","methodName","getStub","lastReturnValue","originalMethod","hasOwnProp","hasOwn","descriptor","spied","_len","args","_key","restore","getLastReturnValue","spyProperty","propertyName","handlers","originalValue","wasAssigned","holder","getV","set","newValue","handlerNewValue","v","isEmptyValue","renderedValue","renderedDive","nodes","rendered","isHtml","str","tagStart","tagChar","charCodeAt","LowerA","LowerZ","UpperA","UpperZ","Exclamation","includes","loadCheerioRoot","html","cheerio","root","load"],"sources":["../src/Utils.js"],"sourcesContent":["/* eslint no-use-before-define: 0 */\nimport isEqual from 'lodash.isequal';\nimport is from 'object-is';\nimport entries from 'object.entries';\nimport fromEntries from 'object.fromentries';\nimport functionName from 'function.prototype.name';\nimport hasOwn from 'hasown';\nimport flat from 'array.prototype.flat';\nimport trim from 'string.prototype.trim';\nimport cheerio from 'cheerio';\n\nimport { get } from './configuration';\nimport { childrenOfNode } from './RSTTraversal';\nimport realGetAdapter from './getAdapter';\nimport validateAdapter from './validateAdapter';\n\nexport const ITERATOR_SYMBOL = typeof Symbol === 'function' && Symbol.iterator;\n\nexport function getAdapter(options = {}) {\n  console.warn('getAdapter from Utils is deprecated; please use ./getAdapter instead');\n  return realGetAdapter(options);\n}\n\nfunction validateMountOptions(attachTo, hydrateIn) {\n  if (attachTo && hydrateIn && attachTo !== hydrateIn) {\n    throw new TypeError('If both the `attachTo` and `hydrateIn` options are provided, they must be === (for backwards compatibility)');\n  }\n}\n\nexport function makeOptions(options) {\n  const { attachTo: configAttachTo, hydrateIn: configHydrateIn, ...config } = get();\n  validateMountOptions(configAttachTo, configHydrateIn);\n\n  const { attachTo, hydrateIn } = options;\n  validateMountOptions(attachTo, hydrateIn);\n\n  // neither present: both undefined\n  // only attachTo present: attachTo set, hydrateIn undefined\n  // only hydrateIn present: both set to hydrateIn\n  // both present (and ===, per above): both set to hydrateIn\n  const finalAttachTo = hydrateIn || configHydrateIn || configAttachTo || attachTo || undefined;\n  const finalHydrateIn = hydrateIn || configHydrateIn || undefined;\n  const mountTargets = {\n    ...(finalAttachTo && { attachTo: finalAttachTo }),\n    ...(finalHydrateIn && { hydrateIn: finalHydrateIn }),\n  };\n\n  return {\n    ...config,\n    ...options,\n    ...mountTargets,\n  };\n}\n\nexport function isCustomComponent(component, adapter) {\n  validateAdapter(adapter);\n  if (adapter.isCustomComponent) {\n    return !!adapter.isCustomComponent(component);\n  }\n  return typeof component === 'function';\n}\n\nexport function isCustomComponentElement(inst, adapter) {\n  if (adapter.isCustomComponentElement) {\n    return !!adapter.isCustomComponentElement(inst);\n  }\n  return !!inst && adapter.isValidElement(inst) && typeof inst.type === 'function';\n}\n\nexport function propsOfNode(node) {\n  const newEntries = entries((node && node.props) || {})\n    .filter(([, value]) => typeof value !== 'undefined');\n  return fromEntries(newEntries);\n}\n\nexport function typeOfNode(node) {\n  return node ? node.type : null;\n}\n\nexport function nodeHasType(node, type) {\n  if (!type || !node) return false;\n\n  const adapter = realGetAdapter();\n  if (adapter.displayNameOfNode) {\n    const displayName = adapter.displayNameOfNode(node);\n    return displayName === type;\n  }\n\n  if (!node.type) return false;\n  if (typeof node.type === 'string') return node.type === type;\n  return (\n    typeof node.type === 'function' ? functionName(node.type) === type : node.type.name === type\n  ) || node.type.displayName === type;\n}\n\nfunction internalChildrenCompare(a, b, lenComp, isLoose) {\n  const nodeCompare = isLoose ? nodeMatches : nodeEqual;\n\n  if (a === b) return true;\n  if (!Array.isArray(a) && !Array.isArray(b)) {\n    return nodeCompare(a, b, lenComp);\n  }\n  const flatA = flat(a, Infinity);\n  const flatB = flat(b, Infinity);\n  if (flatA.length !== flatB.length) return false;\n  if (flatA.length === 0 && flatB.length === 0) return true;\n  for (let i = 0; i < flatA.length; i += 1) {\n    if (!nodeCompare(flatA[i], flatB[i], lenComp)) return false;\n  }\n  return true;\n}\n\nfunction childrenMatch(a, b, lenComp) {\n  return internalChildrenCompare(a, b, lenComp, true);\n}\n\nfunction childrenEqual(a, b, lenComp) {\n  return internalChildrenCompare(a, b, lenComp, false);\n}\n\nfunction removeNullaryReducer(acc, [key, value]) {\n  const addition = value == null ? {} : { [key]: value };\n  return { ...acc, ...addition };\n}\n\nfunction internalNodeCompare(a, b, lenComp, isLoose) {\n  if (a === b) return true;\n  if (!a || !b) return false;\n  if (a.type !== b.type) return false;\n\n  let left = propsOfNode(a);\n  let right = propsOfNode(b);\n  if (isLoose) {\n    left = entries(left).reduce(removeNullaryReducer, {});\n    right = entries(right).reduce(removeNullaryReducer, {});\n  }\n\n  const leftKeys = Object.keys(left);\n  for (let i = 0; i < leftKeys.length; i += 1) {\n    const prop = leftKeys[i];\n    // we will check children later\n    if (prop === 'children') {\n      // continue;\n    } else if (!(prop in right)) {\n      return false;\n    } else if (right[prop] === left[prop]) {\n      // continue;\n    } else if (typeof right[prop] === typeof left[prop] && typeof left[prop] === 'object') {\n      if (!isEqual(left[prop], right[prop])) return false;\n    } else {\n      return false;\n    }\n  }\n\n  const leftHasChildren = 'children' in left;\n  const rightHasChildren = 'children' in right;\n  const childCompare = isLoose ? childrenMatch : childrenEqual;\n  if (leftHasChildren || rightHasChildren) {\n    if (!childCompare(\n      childrenToSimplifiedArray(left.children, isLoose),\n      childrenToSimplifiedArray(right.children, isLoose),\n      lenComp,\n    )) {\n      return false;\n    }\n  }\n\n  if (!isTextualNode(a)) {\n    const rightKeys = Object.keys(right);\n    return lenComp(leftKeys.length - leftHasChildren, rightKeys.length - rightHasChildren);\n  }\n\n  return false;\n}\n\nexport function nodeMatches(a, b, lenComp = is) {\n  return internalNodeCompare(a, b, lenComp, true);\n}\n\nexport function nodeEqual(a, b, lenComp = is) {\n  return internalNodeCompare(a, b, lenComp, false);\n}\n\nexport function containsChildrenSubArray(match, node, subArray) {\n  const children = childrenOfNode(node);\n  const checker = (_, i) => arraysEqual(match, children.slice(i, i + subArray.length), subArray);\n  return children.some(checker);\n}\n\nfunction arraysEqual(match, left, right) {\n  return left.length === right.length && left.every((el, i) => match(el, right[i]));\n}\n\nfunction childrenToArray(children) {\n  const result = [];\n\n  const push = (el) => {\n    if (el === null || el === false || typeof el === 'undefined') return;\n    result.push(el);\n  };\n\n  if (Array.isArray(children)) {\n    children.forEach(push);\n  } else {\n    push(children);\n  }\n  return result;\n}\n\nexport function childrenToSimplifiedArray(nodeChildren, isLoose = false) {\n  const childrenArray = childrenToArray(nodeChildren);\n  const simplifiedArray = [];\n\n  for (let i = 0; i < childrenArray.length; i += 1) {\n    const child = childrenArray[i];\n    const previousChild = simplifiedArray.pop();\n\n    if (typeof previousChild === 'undefined') {\n      simplifiedArray.push(child);\n    } else if (isTextualNode(child) && isTextualNode(previousChild)) {\n      simplifiedArray.push(previousChild + child);\n    } else {\n      simplifiedArray.push(previousChild);\n      simplifiedArray.push(child);\n    }\n  }\n\n  if (isLoose) {\n    return simplifiedArray.map((x) => (typeof x === 'string' ? trim(x) : x));\n  }\n\n  return simplifiedArray;\n}\n\nfunction isTextualNode(node) {\n  return typeof node === 'string' || typeof node === 'number';\n}\n\nexport function isReactElementAlike(arg, adapter) {\n  return adapter.isValidElement(arg) || isTextualNode(arg) || Array.isArray(arg);\n}\n\n// TODO(lmr): can we get rid of this outside of the adapter?\nexport function withSetStateAllowed(fn) {\n  // NOTE(lmr):\n  // this is currently here to circumvent a React bug where `setState()` is\n  // not allowed without global being defined.\n  let cleanup = false;\n  if (typeof global.document === 'undefined') {\n    cleanup = true;\n    global.document = {};\n  }\n  fn();\n  if (cleanup) {\n    // This works around a bug in node/jest in that developers aren't able to\n    // delete things from global when running in a node vm.\n    global.document = undefined;\n    delete global.document;\n  }\n}\n\n// TODO, semver-major: remove this\nexport function AND(fns) {\n  const fnsReversed = fns.slice().reverse();\n  return (x) => fnsReversed.every((fn) => fn(x));\n}\n\nexport function displayNameOfNode(node) {\n  if (!node) return null;\n\n  const { type } = node;\n\n  if (!type) return null;\n\n  return type.displayName || (typeof type === 'function' ? functionName(type) : type.name || type);\n}\n\nexport function sym(s) {\n  return typeof Symbol === 'function' ? Symbol.for(`enzyme.${s}`) : s;\n}\n\nexport function privateSet(obj, prop, value) {\n  Object.defineProperty(obj, prop, {\n    value,\n    enumerable: false,\n    writable: true,\n  });\n}\n\nexport function cloneElement(adapter, el, props) {\n  return adapter.createElement(\n    el.type,\n    { ...el.props, ...props },\n  );\n}\n\nexport function spyMethod(instance, methodName, getStub = () => {}) {\n  let lastReturnValue;\n  const originalMethod = instance[methodName];\n  const hasOwnProp = hasOwn(instance, methodName);\n  let descriptor;\n  if (hasOwnProp) {\n    descriptor = Object.getOwnPropertyDescriptor(instance, methodName);\n  }\n  Object.defineProperty(instance, methodName, {\n    configurable: true,\n    enumerable: !descriptor || !!descriptor.enumerable,\n    value: getStub(originalMethod) || function spied(...args) {\n      const result = originalMethod.apply(this, args);\n      lastReturnValue = result;\n      return result;\n    },\n  });\n  return {\n    restore() {\n      if (hasOwnProp) {\n        if (descriptor) {\n          Object.defineProperty(instance, methodName, descriptor);\n        } else {\n          /* eslint-disable no-param-reassign */\n          instance[methodName] = originalMethod;\n          /* eslint-enable no-param-reassign */\n        }\n      } else {\n        /* eslint-disable no-param-reassign */\n        delete instance[methodName];\n        /* eslint-enable no-param-reassign */\n      }\n    },\n    getLastReturnValue() {\n      return lastReturnValue;\n    },\n  };\n}\n\nexport function spyProperty(instance, propertyName, handlers = {}) {\n  const originalValue = instance[propertyName];\n  const hasOwnProp = hasOwn(instance, propertyName);\n  let descriptor;\n  if (hasOwnProp) {\n    descriptor = Object.getOwnPropertyDescriptor(instance, propertyName);\n  }\n  let wasAssigned = false;\n  let holder = originalValue;\n  const getV = handlers.get ? () => {\n    const value = descriptor && descriptor.get ? descriptor.get.call(instance) : holder;\n    return handlers.get.call(instance, value);\n  } : () => holder;\n  const set = handlers.set ? (newValue) => {\n    wasAssigned = true;\n    const handlerNewValue = handlers.set.call(instance, holder, newValue);\n    holder = handlerNewValue;\n    if (descriptor && descriptor.set) {\n      descriptor.set.call(instance, holder);\n    }\n  } : (v) => {\n    wasAssigned = true;\n    holder = v;\n  };\n  Object.defineProperty(instance, propertyName, {\n    configurable: true,\n    enumerable: !descriptor || !!descriptor.enumerable,\n    get: getV,\n    set,\n  });\n\n  return {\n    restore() {\n      if (hasOwnProp) {\n        if (descriptor) {\n          Object.defineProperty(instance, propertyName, descriptor);\n        } else {\n          /* eslint-disable no-param-reassign */\n          instance[propertyName] = holder;\n          /* eslint-enable no-param-reassign */\n        }\n      } else {\n        /* eslint-disable no-param-reassign */\n        delete instance[propertyName];\n        /* eslint-enable no-param-reassign */\n      }\n    },\n    wasAssigned() {\n      return wasAssigned;\n    },\n  };\n}\n\nexport { default as shallowEqual } from 'enzyme-shallow-equal';\n\nexport function isEmptyValue(renderedValue) {\n  return renderedValue === null || renderedValue === false;\n}\n\nexport function renderedDive(nodes) {\n  if (isEmptyValue(nodes)) {\n    return true;\n  }\n\n  return [].concat(nodes).every((n) => {\n    if (n) {\n      const { rendered } = n;\n      return isEmptyValue(rendered) || renderedDive(rendered);\n    }\n\n    return isEmptyValue(n);\n  });\n}\n\nfunction isHtml(str) {\n  const tagStart = str.indexOf('<');\n  if (tagStart === -1 || tagStart > str.length - 3) {\n    return false;\n  }\n\n  const tagChar = str.charCodeAt(tagStart + 1);\n\n  const LowerA = 'a'.charCodeAt(0); // 97\n  const LowerZ = 'z'.charCodeAt(0); // 122\n  const UpperA = 'A'.charCodeAt(0); // 65\n  const UpperZ = 'Z'.charCodeAt(0); // 90\n  const Exclamation = '!'.charCodeAt(0); // 33\n\n  return (\n    ((tagChar >= LowerA && tagChar <= LowerZ) ||\n      (tagChar >= UpperA && tagChar <= UpperZ) ||\n      tagChar === Exclamation) &&\n    str.includes('>', tagStart + 2)\n  );\n}\n\n\nexport function loadCheerioRoot(html) {\n  if (!html) {\n    return cheerio.root();\n  }\n\n  if (!isHtml(html)) {\n    // create fragment with isDocument=false\n    return cheerio.load(html, null, false).root();\n  }\n\n  return cheerio.load(html).root();\n}\n"],"mappings":"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","ignoreList":[]}